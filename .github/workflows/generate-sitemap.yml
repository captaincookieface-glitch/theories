name: Generate Sitemap

on:
push:
branches: [main]

permissions:
contents: write

jobs:
sitemap:
runs-on: ubuntu-latest
steps:
- uses: actions/checkout@v4

```
  - name: Generate sitemap
    run: |
      echo '<?xml version="1.0" encoding="UTF-8"?>' > sitemap.xml
      echo '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">' >> sitemap.xml
      echo '<url><loc>https://www.captaincookieface.com/</loc></url>' >> sitemap.xml
      echo '<url><loc>https://www.captaincookieface.com/theories/</loc></url>' >> sitemap.xml
      for f in theories/*.html; do echo "<url><loc>https://www.captaincookieface.com/$f</loc></url>" >> sitemap.xml; done
      echo '</urlset>' >> sitemap.xml

  - name: Commit
    run: |
      git config user.email "action@github.com"
      git config user.name "GitHub Action"
      git add sitemap.xml
      git diff --staged --quiet || git commit -m "Update sitemap"
      git push
```
